const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChoicedItem-DW-UGY_5.js","assets/index-C-e4B15X.js","assets/index-BEccBhQ-.css","assets/ChoicedItem-CLzSvlk1.css"])))=>i.map(i=>d[i]);
import{_ as u,d,a as _,r as p,o as l,c as o,b as r,w as m,i as g,F as C,g as y,j as n,h as R,n as v,t as S,p as f,f as w}from"./index-C-e4B15X.js";const L="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.3833%2012.8767C7.76953%2012.8767%209.04785%2012.4285%2010.0938%2011.6814L14.0283%2015.616C14.2109%2015.7986%2014.4517%2015.8899%2014.709%2015.8899C15.2485%2015.8899%2015.6304%2015.4749%2015.6304%2014.9436C15.6304%2014.6946%2015.5474%2014.4539%2015.3647%2014.2795L11.4551%2010.3616C12.2769%209.28247%2012.7666%207.94604%2012.7666%206.49341C12.7666%202.98218%209.89453%200.110107%206.3833%200.110107C2.88037%200.110107%200%202.97388%200%206.49341C0%2010.0046%202.87207%2012.8767%206.3833%2012.8767ZM6.3833%2011.4988C3.64404%2011.4988%201.37793%209.23267%201.37793%206.49341C1.37793%203.75415%203.64404%201.48804%206.3833%201.48804C9.12256%201.48804%2011.3887%203.75415%2011.3887%206.49341C11.3887%209.23267%209.12256%2011.4988%206.3833%2011.4988Z'%20fill='%23EBEBF5'%20fill-opacity='0.6'/%3e%3c/svg%3e",V={name:"Search",components:{ChoicedItem:d(()=>_(()=>import("./ChoicedItem-DW-UGY_5.js"),__vite__mapDeps([0,1,2,3])))},data(){return{searchValue:"",searchResult:[],selectedResult:null,choiceForecast:null}},computed:{isOpenSearch(){return this.$store.getters.isOpenSearch},userLang(){return this.$store.getters.userLang}},created(){this.getSearchResullt=this.debounce(this.handlerResponse)},methods:{debounce(e){let s;return()=>{clearTimeout(s),s=setTimeout(()=>{e.apply(this)},300)}},async handlerResponse(){if(this.searchValue.length<2){this.reset();return}this.selectedResult||(this.searchResult=await this.$store.dispatch("searchCityByName",this.searchValue))},closeSearchModal(){this.$store.commit("TOGGLE_SEARCH",!1)},getLabel(e){const{userLang:s}=this;return`${e.local_names&&e.local_names[s]?e.local_names[s]:e.name} ${e.state?e.state:""} ${e.country}`},async selectResultItem(e){this.selectedResult=e,this.searchValue=this.getLabel(e),this.choiceForecast=await this.$store.dispatch("getWeatherByCityName",[e.name,e.country])},reset(e){this.choiceForecast=null,this.selectedResult=null,this.searchResult=[],e&&(this.searchValue="",this.closeSearchModal())}}},k=e=>(f("data-v-2354a82d"),e=e(),w(),e),B={class:"search__wrap"},F={class:"search__input"},M=k(()=>r("img",{class:"search__input--icon",src:L,alt:"search-icon"},null,-1)),b=["placeholder"],E={key:0,class:"search__result"},I=["onClick"];function N(e,s,i,O,a,c){const h=p("ChoicedItem");return l(),o("div",{class:v(["search",{isOpen:c.isOpenSearch}])},[r("div",{class:"search__close",onClick:s[0]||(s[0]=(...t)=>c.closeSearchModal&&c.closeSearchModal(...t))}),r("div",B,[r("label",F,[M,m(r("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.searchValue=t),onInput:s[2]||(s[2]=(...t)=>e.getSearchResullt&&e.getSearchResullt(...t)),type:"text",placeholder:e.$t("search.input.placeholder")},null,40,b),[[g,a.searchValue]])]),a.selectedResult?n("",!0):(l(),o("ul",E,[(l(!0),o(C,null,y(a.searchResult,t=>(l(),o("li",{key:t.name+t.country+t.state,class:"search__result__item",onClick:T=>c.selectResultItem(t)},S(c.getLabel(t)),9,I))),128))])),a.choiceForecast?(l(),R(h,{key:1,class:"search__content",widget:a.choiceForecast,onAddedToMain:s[3]||(s[3]=t=>c.reset(!0))},null,8,["widget"])):n("",!0)])],2)}const A=u(V,[["render",N],["__scopeId","data-v-2354a82d"]]);export{A as default};
