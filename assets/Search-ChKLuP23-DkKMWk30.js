const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChoicedItem-DW-UGY_5-pxYV6O0n.js","assets/index-BLqQkojB.js","assets/index-CNshQAsA.css"])))=>i.map(i=>d[i]);
import{m as _,$ as m,W as p,_ as C,c as g,u as R,J as r,L as y,n as l,C as h,d as v,f as L,G as o,a as S,h as w,R as $,T as f,b as I}from"./index-BLqQkojB.js";const u=(e,s=u,i=s.f||(s.f=["assets/ChoicedItem-DW-UGY_5.js","assets/index-C-e4B15X.js","assets/index-BEccBhQ-.css","assets/ChoicedItem-CLzSvlk1.css"]))=>e.map(n=>i[n]),V="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.3833%2012.8767C7.76953%2012.8767%209.04785%2012.4285%2010.0938%2011.6814L14.0283%2015.616C14.2109%2015.7986%2014.4517%2015.8899%2014.709%2015.8899C15.2485%2015.8899%2015.6304%2015.4749%2015.6304%2014.9436C15.6304%2014.6946%2015.5474%2014.4539%2015.3647%2014.2795L11.4551%2010.3616C12.2769%209.28247%2012.7666%207.94604%2012.7666%206.49341C12.7666%202.98218%209.89453%200.110107%206.3833%200.110107C2.88037%200.110107%200%202.97388%200%206.49341C0%2010.0046%202.87207%2012.8767%206.3833%2012.8767ZM6.3833%2011.4988C3.64404%2011.4988%201.37793%209.23267%201.37793%206.49341C1.37793%203.75415%203.64404%201.48804%206.3833%201.48804C9.12256%201.48804%2011.3887%203.75415%2011.3887%206.49341C11.3887%209.23267%209.12256%2011.4988%206.3833%2011.4988Z'%20fill='%23EBEBF5'%20fill-opacity='0.6'/%3e%3c/svg%3e",B={name:"Search",components:{ChoicedItem:m(()=>p(()=>C(()=>import("./ChoicedItem-DW-UGY_5-pxYV6O0n.js"),__vite__mapDeps([0,1,2])),u([0,1,2,3])))},data(){return{searchValue:"",searchResult:[],selectedResult:null,choiceForecast:null}},computed:{isOpenSearch(){return this.$store.getters.isOpenSearch},userLang(){return this.$store.getters.userLang}},created(){this.getSearchResullt=this.debounce(this.handlerResponse)},methods:{debounce(e){let s;return()=>{clearTimeout(s),s=setTimeout(()=>{e.apply(this)},300)}},async handlerResponse(){if(this.searchValue.length<2){this.reset();return}this.selectedResult||(this.searchResult=await this.$store.dispatch("searchCityByName",this.searchValue))},closeSearchModal(){this.$store.commit("TOGGLE_SEARCH",!1)},getLabel(e){const{userLang:s}=this;return`${e.local_names&&e.local_names[s]?e.local_names[s]:e.name} ${e.state?e.state:""} ${e.country}`},async selectResultItem(e){this.selectedResult=e,this.searchValue=this.getLabel(e),this.choiceForecast=await this.$store.dispatch("getWeatherByCityName",[e.name,e.country])},reset(e){this.choiceForecast=null,this.selectedResult=null,this.searchResult=[],e&&(this.searchValue="",this.closeSearchModal())}}},b=e=>(g("data-v-2354a82d"),e=e(),R(),e),k={class:"search__wrap"},E={class:"search__input"},M=b(()=>r("img",{class:"search__input--icon",src:V,alt:"search-icon"},null,-1)),T=["placeholder"],x={key:0,class:"search__result"},F=["onClick"];function O(e,s,i,n,a,c){const d=y("ChoicedItem");return l(),h("div",{class:f(["search",{isOpen:c.isOpenSearch}])},[r("div",{class:"search__close",onClick:s[0]||(s[0]=(...t)=>c.closeSearchModal&&c.closeSearchModal(...t))}),r("div",k,[r("label",E,[M,v(r("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.searchValue=t),onInput:s[2]||(s[2]=(...t)=>e.getSearchResullt&&e.getSearchResullt(...t)),type:"text",placeholder:e.$t("search.input.placeholder")},null,40,T),[[L,a.searchValue]])]),a.selectedResult?o("",!0):(l(),h("ul",x,[(l(!0),h(S,null,w(a.searchResult,t=>(l(),h("li",{key:t.name+t.country+t.state,class:"search__result__item",onClick:G=>c.selectResultItem(t)},I(c.getLabel(t)),9,F))),128))])),a.choiceForecast?(l(),$(d,{key:1,class:"search__content",widget:a.choiceForecast,onAddedToMain:s[3]||(s[3]=t=>c.reset(!0))},null,8,["widget"])):o("",!0)])],2)}const W=_(B,[["render",O],["__scopeId","data-v-2354a82d"]]);export{W as default};
